{% extends 'blog/base.html' %}
{% block title %}Список постов{% endblock %}
{% block content %}
<h1>Все посты</h1>
<div class="post-grid">
    {% if posts %}
        {% for post in posts %}
        <div class="post-card {% for cat in post.categories.all %}{% if cat.name == 'IT' %}category-it{% elif cat.name == 'Личное' %}category-personal{% elif cat.name == 'Мотивация' %}category-motivation{% endif %}{% endfor %}">
            <div class="card-body">
                <h5 class="card-title"><a href="{% url 'post_detail' post.pk %}" style="color: inherit; text-decoration: none;">{{ post.title }}</a></h5>
                <p class="card-text">{{ post.text|truncatewords:12 }}</p>
                <p class="card-text"><small class="text-muted">Автор: {{ post.author }} | {{ post.created_at|date:"d.m.Y H:i" }}</small></p>
                <p class="card-text"><small>Категории: {% for cat in post.categories.all %}{{ cat.name }}{% if not forloop.last %}, {% endif %}{% endfor %}</small></p>
            </div>
        </div>
        {% endfor %}
    {% else %}
        <p class="text-center text-white">Нет постов. <a href="{% url 'post_create' %}" class="text-warning">Создать первый?</a></p>
    {% endif %}
</div>
{% endblock %}